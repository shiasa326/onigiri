<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ¬æ—¥ã®ãŠã«ãã‚Šå ã„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: #fff9f0;
        }
        .onigiri-card {
            transition: transform 0.3s ease;
        }
        .onigiri-card:hover {
            transform: translateY(-5px);
        }
        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="max-w-md w-full bg-white rounded-3xl shadow-xl overflow-hidden p-8 border-4 border-orange-100">
        <div class="text-center">
            <h1 class="text-3xl font-bold text-orange-600 mb-2">ğŸ™ æœ¬æ—¥ã®å…·æå ã„</h1>
            <p class="text-gray-500 text-sm mb-6">ä»Šæ—¥ã®ãŠã«ãã‚Šã€ä½•ã«ã™ã‚‹ï¼Ÿ</p>

            <!-- Result Display Area -->
            <div id="display-area" class="onigiri-card bg-orange-50 rounded-2xl p-10 mb-8 border-2 border-dashed border-orange-200">
                <div id="onigiri-icon" class="text-7xl mb-4">ğŸ™</div>
                <div id="ingredient-name" class="text-2xl font-bold text-gray-800">ï¼Ÿï¼Ÿï¼Ÿ</div>
            </div>

            <button onclick="pickIngredient()" id="pick-btn" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-4 rounded-xl shadow-lg transition duration-200 text-lg">
                å…·æã‚’æ±ºã‚ã‚‹ï¼
            </button>

            <div class="mt-8 pt-6 border-t border-gray-100">
                <details class="text-left">
                    <summary class="text-gray-400 text-sm cursor-pointer hover:text-orange-400 transition">å…·æãƒªã‚¹ãƒˆã‚’ç·¨é›†ã™ã‚‹</summary>
                    <div class="mt-4">
                        <div class="flex gap-2 mb-4">
                            <input type="text" id="new-ingredient" placeholder="æ–°ã—ã„å…·æ..." class="flex-1 border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-300">
                            <button onclick="addIngredient()" class="bg-gray-800 text-white px-4 py-2 rounded-lg text-sm font-bold">è¿½åŠ </button>
                        </div>
                        <ul id="ingredient-list" class="text-sm text-gray-600 space-y-1 max-h-40 overflow-y-auto">
                            <!-- List items will be injected here -->
                        </ul>
                    </div>
                </details>
            </div>
        </div>
    </div>

    <script>
        // Default ingredients with their corresponding emojis
        let ingredients = [
            { name: "é®­ï¼ˆã—ã‚ƒã‘ï¼‰", icon: "ğŸŸ" },
            { name: "æ¢…å¹²ã—", icon: "ğŸ”´" },
            { name: "æ˜†å¸ƒ", icon: "ğŸŒ¿" },
            { name: "ãƒ„ãƒŠãƒãƒ¨", icon: "ğŸŸ" },
            { name: "æ˜å¤ªå­", icon: "ğŸŒ¶ï¸" },
            { name: "ãŠã‹ã‹", icon: "ğŸˆ" },
            { name: "é«˜èœ", icon: "ğŸ¥¬" },
            { name: "å¤©ã‚€ã™", icon: "ğŸ¤" },
            { name: "ç„¼ããŸã‚‰ã“", icon: "ğŸ”¥" },
            { name: "ã„ãã‚‰", icon: "âœ¨" },
            { name: "å¡©ã‚€ã™ã³", icon: "ğŸ§‚" },
            { name: "è‚‰å‘³å™Œ", icon: "ğŸ–" }
        ];

        function init() {
            // Load from localStorage if exists
            const saved = localStorage.getItem('my_onigiri_list');
            if (saved) {
                ingredients = JSON.parse(saved);
            }
            renderList();
            
            // Auto-pick on load
            setTimeout(pickIngredient, 500);
        }

        function pickIngredient() {
            const displayArea = document.getElementById('display-area');
            const iconEl = document.getElementById('onigiri-icon');
            const nameEl = document.getElementById('ingredient-name');
            const btn = document.getElementById('pick-btn');

            // Animation
            displayArea.classList.add('shake');
            btn.disabled = true;
            nameEl.innerText = "è€ƒãˆä¸­...";
            iconEl.innerText = "ğŸ™";

            setTimeout(() => {
                const result = ingredients[Math.floor(Math.random() * ingredients.length)];
                
                iconEl.innerText = result.icon || "ğŸ™";
                nameEl.innerText = result.name;
                
                displayArea.classList.remove('shake');
                btn.disabled = false;
            }, 600);
        }

        function addIngredient() {
            const input = document.getElementById('new-ingredient');
            const val = input.value.trim();
            if (val) {
                ingredients.push({ name: val, icon: "ğŸ±" });
                input.value = "";
                saveAndRender();
            }
        }

        function removeIngredient(index) {
            if (ingredients.length > 1) {
                ingredients.splice(index, 1);
                saveAndRender();
            } else {
                alert("å…·æãŒãªããªã£ã¡ã‚ƒã„ã¾ã™ï¼");
            }
        }

        function saveAndRender() {
            localStorage.setItem('my_onigiri_list', JSON.stringify(ingredients));
            renderList();
        }

        function renderList() {
            const listEl = document.getElementById('ingredient-list');
            listEl.innerHTML = ingredients.map((ing, index) => `
                <li class="flex justify-between items-center bg-gray-50 p-2 rounded">
                    <span>${ing.icon || 'ğŸ™'} ${ing.name}</span>
                    <button onclick="removeIngredient(${index})" class="text-red-400 hover:text-red-600 px-2">Ã—</button>
                </li>
            `).join('');
        }

        window.onload = init;
    </script>
</body>
</html>
